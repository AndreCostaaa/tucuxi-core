if(NOT config_nobotan)
    if(WIN32)
        # Add botan library
        add_library(botan_base STATIC IMPORTED GLOBAL)
        if(EXISTS ${CMAKE_CURRENT_LIST_DIR}/../../libs/botan)
            if(CMAKE_BUILD_TYPE STREQUAL "Debug")
                # Set where to search for botan lib
                set_target_properties(botan_base PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_LIST_DIR}/../../libs/botan/botanD.lib)
            elseif(CMAKE_BUILD_TYPE STREQUAL "Release")
                set_target_properties(botan_base PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_LIST_DIR}/../../libs/botan/botan.lib)
            endif()
        else()
            message(FATAL_ERROR "Error: Build directory not found in libs/botan. Run the setup.bat file found in tucuxi-core")
        endif()
        
        find_library(IPHLPAPI_LIBRARY NAMES Iphlpapi iphlpapi)
        find_library(USER32_LIBRARY NAMES user32)
        
        add_library(botan INTERFACE)
        target_link_libraries(botan INTERFACE botan_base ${IPHLPAPI_LIBRARY} ${USER32_LIBRARY})
    else(ANDROID)
        IF(UNIX)
            add_library(botan STATIC IMPORTED GLOBAL)
            IF(EXISTS ${CMAKE_CURRENT_LIST_DIR}/../../libs/botan)
                set_target_properties(botan PROPERTIES IMPORTED_LOCATION ${CMAKE_CURRENT_LIST_DIR}/../../libs/botan/libbotan-2.a)
            else()
                message(FATAL_ERROR "Error: Impossible to find botan")
            endif()
        endif(UNIX)
    endif(WIN32)
endif()
